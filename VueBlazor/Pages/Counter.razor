@page "/counter"
@using ViewModel
@using VueBlazor.Components.Commons.Fields
@inherits ViewModelPageBase<CounterViewModel>

<PageTitle>Counter</PageTitle>

<h1>Counter</h1>

<p role="status">
    <strong>@ViewModel.CurrentCount.Label:</strong> @ViewModel.CurrentCount.Value
</p>

<!-- Method 1: Using Field View Component -->
<IntegerFieldView Field="@ViewModel.CurrentCount" />

<!-- Method 2: Manual binding (alternative demo) -->
<div class="mb-3">
    <label>@ViewModel.CurrentCount.Label (Manual Binding)</label>
    <input type="number"
           class="form-control @(!string.IsNullOrEmpty(ViewModel.CurrentCount.Error) ? "is-invalid" : "")"
           value="@ViewModel.CurrentCount.Value"
           @oninput="@(e => ViewModel.CurrentCount.Value = int.Parse(e.Value?.ToString() ?? "0"))" />

    @if (!string.IsNullOrEmpty(ViewModel.CurrentCount.Error))
    {
        <div class="text-danger">@ViewModel.CurrentCount.Error</div>
    }
    @if (!string.IsNullOrEmpty(ViewModel.CurrentCount.Warning))
    {
        <div class="text-warning">⚠️ @ViewModel.CurrentCount.Warning</div>
    }
</div>

<CommandView Command="@ViewModel.IncrementCountCommand" />
<CommandView Command="@ViewModel.ResetCountCommand" CssClass="btn btn-secondary ms-2" /> @* Override Default style with secondary *@

@code {
    // ViewModel injected via DI - no initialization needed in Blazor!
}
